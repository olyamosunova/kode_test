(this.webpackJsonpkode_test=this.webpackJsonpkode_test||[]).push([[0],{100:function(e,t,c){},101:function(e,t,c){},102:function(e,t,c){},103:function(e,t,c){},104:function(e,t,c){},105:function(e,t,c){},106:function(e,t,c){},107:function(e,t,c){},108:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),r=c(22),s=c.n(r),i=(c(61),c(21)),o=c.n(i),l=c(25),j=c(3),d=c(5),u=c(19),b=c(29),O=c(18),f="NO_AUTH",m="AUTH",h="\u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e.",x="\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c.",p="\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043a\u043e\u0434",v="LOGIN",g="CODE",_="1cf24b30-3606-41ab-9abd-fc96dbcd39bf",N=c(13),S=c.n(N),k=c(1),y=function(e){var t=e.isAuthorizationSuccess,c=e.submitForm,a=e.handleChange,r=e.errors,s=Object(n.useState)(!1),i=Object(j.a)(s,2),o=i[0],l=i[1];Object(n.useEffect)((function(){(r.login||r.password||!t)&&l(!0)}),[r]);return Object(k.jsxs)("form",{className:S()("form",{"form--error":o}),onSubmit:function(e){l(!1),c(e)},children:[!t&&Object(k.jsx)("p",{className:"form__error",children:x}),Object(k.jsxs)("div",{className:"form__block",children:[Object(k.jsxs)("label",{className:r.login&&"is-invalid",children:[Object(k.jsx)("span",{children:"Login"}),Object(k.jsx)("input",{name:"login",type:"text",placeholder:"Enter login",onChange:a})]}),r.login&&Object(k.jsx)("div",{className:"form__block-error",children:r.login})]}),Object(k.jsxs)("div",{className:"form__block",children:[Object(k.jsxs)("label",{className:r.password&&"is-invalid",children:[Object(k.jsx)("span",{children:"Password"}),Object(k.jsx)("input",{name:"password",type:"password",placeholder:"Enter password",onChange:a})]}),r.password&&Object(k.jsx)("div",{className:"form__block-error",children:r.password})]}),Object(k.jsx)("button",{className:"button",type:"submit",children:"Log in"})]})},w=(c(64),function(e){var t=e.handleChange,c=e.submitForm,a=e.errors,r=Object(n.useState)(!1),s=Object(j.a)(r,2),i=s[0],o=s[1];Object(n.useEffect)((function(){a.code&&o(!0)}),[a]);return Object(k.jsxs)("form",{className:S()("form",{"form--error":i}),onSubmit:function(e){o(!1),c(e)},children:[Object(k.jsxs)("div",{className:"form__block",children:[Object(k.jsxs)("label",{className:a.code&&"is-invalid",children:[Object(k.jsx)("span",{children:"Code from SMS"}),Object(k.jsx)("input",{name:"code",type:"text",placeholder:"Enter code",onChange:t})]}),a.code&&Object(k.jsx)("div",{className:"form__block-error",children:a.code})]}),Object(k.jsx)("button",{className:"button",type:"submit",children:"Send"})]})}),C=function(e){var t=e.onLoginFormSubmit,c=e.onCodeFormSubmit,a=e.serverError,r=Object(n.useState)(!0),s=Object(j.a)(r,2),i=s[0],d=s[1],u=Object(n.useState)(!1),f=Object(j.a)(u,2),m=f[0],x=f[1],_=Object(n.useState)({fields:{},errors:{}}),N=Object(j.a)(_,2),S=N[0],C=N[1];Object(n.useEffect)((function(){a&&C((function(e){return Object(O.a)(Object(O.a)({},e),{},{errors:{}})}))}),[a]);var E=function(e){var t={},c=!0;switch(e){case v:S.fields.login||(c=!1,t.login=h),S.fields.password||(c=!1,t.password=h);break;case g:S.fields.code||(c=!1,t.code=h)}return C(Object(O.a)(Object(O.a)({},S),{},{errors:t})),c},F=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!E(g)){e.next=6;break}return e.next=4,c(S.fields.login,S.fields.code);case 4:e.sent||C(Object(O.a)(Object(O.a)({},S),{},{errors:{code:p}}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(e){var t=S.fields;t[e.target.name]=e.target.value,C({fields:t,errors:Object(O.a)(Object(O.a)({},S.errors),{},Object(b.a)({},e.target.name,null))})};return Object(k.jsx)("div",{className:"auth",children:Object(k.jsxs)("div",{className:"container",children:[a&&Object(k.jsxs)("p",{className:"text-danger",children:["\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430: ",a]}),m?Object(k.jsx)(w,{handleChange:L,submitForm:F,errors:S.errors}):Object(k.jsx)(y,{isAuthorizationSuccess:i,handleChange:L,submitForm:function(e){e.preventDefault(),E(v)&&(t(S.fields)?(x(!0),alert("Valid SMS code: 123456")):d(!1))},errors:S.errors})]})})},E=c(16),F=(c(94),function(e){var t=e.isBackLink,c=void 0!==t&&t,n=Object(d.g)();return Object(k.jsx)("header",{className:"header",children:Object(k.jsx)("div",{className:"container",children:Object(k.jsxs)("div",{className:"header__nav",children:[c&&Object(k.jsx)("button",{type:"button",onClick:function(){n.goBack()},children:"< Back"}),Object(k.jsx)(u.b,{className:"ml-auto",to:"/logout",children:"Logout"})]})})})}),L=c(125),I=(c(100),function(){return Object(k.jsx)("div",{className:"loader",children:Object(k.jsx)(L.a,{color:"primary"})})}),z=c.p+"static/media/cry.f7c602c9.gif",T=(c(101),function(e){var t=e.message;return Object(k.jsxs)("div",{className:"error-block",children:[Object(k.jsx)("p",{children:t}),Object(k.jsx)("img",{src:z,alt:"sticker"})]})}),A=(c(102),function(){var e,t,c,a,r,s=Object(d.h)().cardId,i=Object(n.useState)({}),o=Object(j.a)(i,2),l=o[0],u=o[1],b=Object(n.useState)(!1),O=Object(j.a)(b,2),f=O[0],m=O[1],h=Object(n.useState)(!1),x=Object(j.a)(h,2),p=x[0],v=x[1];return E.a.configure({apiKey:_}),Object(n.useEffect)((function(){E.a.card.find(s).then((function(e){u(e)})).catch((function(){v(!0)})).finally((function(){m(!0)}))}),[s]),Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(F,{isBackLink:!0}),f?Object(k.jsx)(k.Fragment,{children:p?Object(k.jsx)(T,{message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0434\u0435\u0442\u0430\u043b\u044c\u043d\u0443\u044e \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443."}):Object(k.jsx)("main",{children:Object(k.jsx)("div",{className:"container",children:Object(k.jsxs)("div",{className:"card-detail",children:[Object(k.jsx)("p",{className:"card-detail__title",children:l.name}),Object(k.jsx)("div",{className:"card-detail__block",children:Object(k.jsx)("div",{className:"card-detail__image",children:Object(k.jsx)("img",{src:null===(e=l.images)||void 0===e?void 0:e.large,alt:l.name})})}),Object(k.jsxs)("div",{className:"card-detail__block",children:[Object(k.jsxs)("div",{className:"card-detail__info",children:[Object(k.jsxs)("p",{children:["Pokemon name: ",Object(k.jsx)("b",{children:l.name})]}),Object(k.jsxs)("p",{children:["Supertype: ",Object(k.jsx)("b",{children:l.supertype})]}),Object(k.jsxs)("p",{children:["Types: ",Object(k.jsx)("b",{children:null===(t=l.types)||void 0===t?void 0:t.join(", ")})]}),Object(k.jsxs)("p",{children:["Subtypes: ",Object(k.jsx)("b",{children:null===(c=l.subtypes)||void 0===c?void 0:c.join(", ")})]})]}),(null===(a=l.attacks)||void 0===a?void 0:a.length)&&Object(k.jsx)("div",{className:"card-detail__info",children:Object(k.jsx)("ul",{children:null===(r=l.attacks)||void 0===r?void 0:r.map((function(e){return Object(k.jsx)("li",{children:Object(k.jsx)("b",{children:e.name})},e.name)}))})}),Object(k.jsx)("p",{className:"card-detail__description",children:l.flavorText})]})]})})})}):Object(k.jsx)(I,{})]})}),B=c(127),M=(c(103),function(e){var t=e.title,c=void 0===t?"Type":t,a=e.items,r=void 0===a?[]:a,s=e.onSelect,i=e.activeItem,o=void 0===i?"":i,l=Object(n.useState)(!1),d=Object(j.a)(l,2),u=d[0],b=d[1],O=Object(n.useState)(o),f=Object(j.a)(O,2),m=f[0],h=f[1],x=Object(n.useState)(r),p=Object(j.a)(x,2),v=p[0],g=p[1],_=Object(n.useRef)(),N=Object(n.useRef)();Object(n.useEffect)((function(){document.addEventListener("click",(function(e){N.current&&!N.current.contains(e.target)&&b(!1)}))}),[]),Object(n.useEffect)((function(){g(r),_.current.value=""}),[u]);return Object(k.jsxs)("div",{ref:N,className:S()("select my-5",{"select--open":u}),children:[Object(k.jsx)("div",{className:"select__header",onClick:function(){b(!u)},children:Object(k.jsx)("span",{children:m||c})}),Object(k.jsxs)("div",{className:"select__body",children:[Object(k.jsx)("div",{className:"select__search",children:Object(k.jsx)("input",{ref:_,onInput:function(e){return function(e){var t=e.target.value.toLowerCase(),c=r.filter((function(e){return e.toLowerCase().indexOf(t)>-1}));g(""!==t?c:r)}(e)},placeholder:"Type something..."})}),Object(k.jsx)("div",{className:"select__list",children:v.map((function(e){return Object(k.jsx)("a",{className:S()("select__item",{"select__item--active":e===m}),onClick:function(){return h(m===(t=e)?"":t),b(!1),void s(m===t?"":t);var t},children:e},e)}))})]})]})}),P=(c(104),function(e){var t,c=e.className,n=e.card,a=e.handlerClickCard;return Object(k.jsxs)("div",{className:S()(c,{"card-item":!0}),tabIndex:0,onClick:a,children:[Object(k.jsx)("div",{className:"card-item__image",children:Object(k.jsx)("img",{src:null===(t=n.images)||void 0===t?void 0:t.small,alt:n.name})}),Object(k.jsxs)("div",{className:"card-item__info",children:[Object(k.jsx)("p",{children:n.name}),Object(k.jsxs)("p",{children:[" ",n.artist]})]}),Object(k.jsx)("div",{className:"card-item__controls",children:Object(k.jsx)(u.b,{onClick:function(e){e.stopPropagation()},to:"/cards/".concat(n.id),className:"card-item__button",children:"Go to detail page"})})]})}),D=(c(105),function(e){var t=e.card,c=e.handlerCloseModal,a=t.name,r=t.images,s=Object(n.useRef)(),i=Object(n.useState)(!1),o=Object(j.a)(i,2),l=o[0],d=o[1];return Object(n.useEffect)((function(){d(!0);document.addEventListener("click",(function(e){s.current&&!s.current.contains(e.target)&&(d(!1),c())}))}),[]),Object(k.jsx)("div",{className:"modal-card",children:Object(k.jsxs)("div",{className:S()("modal-card__wrapper",{"modal-card__wrapper--show":l}),ref:s,children:[Object(k.jsxs)("div",{className:"modal-card__header",children:[Object(k.jsx)("p",{className:"modal-card__title",children:a}),Object(k.jsx)("button",{className:"modal-card__close",type:"button",onClick:c,children:Object(k.jsx)("span",{children:"Close modal"})})]}),Object(k.jsx)("div",{className:"modal-card__body",children:Object(k.jsx)("img",{src:r.large,alt:a})})]})})}),R=function(e,t){return e&&t?"types:".concat(e," subtypes:").concat(t):e?"types:".concat(e):t&&"subtypes:".concat(t)},U=function(e,t,c){var n=e&&"type=".concat(e,"&"),a=t&&"subtype=".concat(t,"&"),r=c&&"page=".concat(c);return"?".concat(n).concat(a).concat(r)},q=(c(106),function(){var e,t,c=Object(d.g)(),a=new URLSearchParams(c.location.search);E.a.configure({apiKey:_});var r=Object(n.useState)([]),s=Object(j.a)(r,2),i=s[0],o=s[1],l=Object(n.useState)([]),u=Object(j.a)(l,2),b=u[0],O=u[1],f=Object(n.useState)([]),m=Object(j.a)(f,2),h=m[0],x=m[1],p=Object(n.useState)(!1),v=Object(j.a)(p,2),g=v[0],N=v[1],y=Object(n.useState)(null!==(e=a.get("type"))&&void 0!==e?e:""),w=Object(j.a)(y,2),C=w[0],L=w[1],z=Object(n.useState)(null!==(t=a.get("subtype"))&&void 0!==t?t:""),A=Object(j.a)(z,2),q=A[0],G=A[1],H=Object(n.useState)(0),J=Object(j.a)(H,2),K=J[0],V=J[1],Q=Object(n.useState)(a.get("page")?+a.get("page"):1),W=Object(j.a)(Q,2),X=W[0],Y=W[1],Z=Object(n.useState)(null),$=Object(j.a)(Z,2),ee=$[0],te=$[1],ce=Object(n.useState)(!1),ne=Object(j.a)(ce,2),ae=ne[0],re=ne[1];Object(n.useEffect)((function(){E.a.type.all().then((function(e){O(e)})).catch((function(){re(!0)})),E.a.subtype.all().then((function(e){x(e)})).catch((function(){re(!0)})),E.a.card.where({pageSize:4,page:1}).then((function(e){o(e.data),V(Math.round(e.totalCount/e.pageSize))})).catch((function(){re(!0)})).finally((function(){return N(!0)}))}),[]),Object(n.useEffect)((function(){var e=R(C,q);N(!1),E.a.card.where({pageSize:4,page:1,q:e}).then((function(e){o(e.data),V(Math.round(e.totalCount/e.pageSize)),Y(1)})).catch((function(){re(!0)})).finally((function(){return N(!0)})),c.push("/cards".concat(U(C,q,X)))}),[C,q]),Object(n.useEffect)((function(){var e=R(C,q);N(!1),E.a.card.where({pageSize:4,page:X,q:e}).then((function(e){o(e.data)})).catch((function(){re(!0)})).finally((function(){return N(!0)})),c.push("/cards".concat(U(C,q,X)))}),[X]);return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(F,{}),Object(k.jsxs)("main",{className:S()({hidden:ee}),children:[Object(k.jsx)("div",{className:"container",children:Object(k.jsx)(k.Fragment,{children:ae?Object(k.jsx)(T,{message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443."}):Object(k.jsxs)("div",{className:"cards",children:[Object(k.jsxs)("div",{className:"cards__filter",children:[Object(k.jsx)(M,{title:"Type",items:b,onSelect:function(e){return L(e)},activeItem:C}),Object(k.jsx)(M,{title:"Subtype",items:h,onSelect:function(e){return G(e)},activeItem:q})]}),Object(k.jsx)("div",{className:"cards__wrapper",children:g?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)("div",{className:"cards__list",children:[i.map((function(e){return Object(k.jsx)(P,{className:"cards__item",card:e,handlerClickCard:function(){return te(e)}},e.id)})),!i.length&&Object(k.jsx)("p",{children:"Pokemons not found by this filter"})]}),K>1&&Object(k.jsx)(B.a,{page:X,onChange:function(e,t){e.preventDefault(),Y(t)},count:K,showFirstButton:!0,showLastButton:!0})]}):Object(k.jsx)(I,{})})]})})}),ee&&Object(k.jsx)(D,{card:ee,handlerCloseModal:function(){return te(null)}})]})]})}),G=(c(107),function(){var e=Object(n.useState)(localStorage.getItem("pokemonAuthorization")?m:f),t=Object(j.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(null),s=Object(j.a)(r,2),i=s[0],b=s[1],O=function(e){var t=e.login,c=e.password;return"kode@kode.ru"===t&&"Enk0deng"===c},h=function(){var e=Object(l.a)(o.a.mark((function e(){var t,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,c=new Promise((function(e,t){setTimeout((function(){e({data:"123456"})}),250)})),e.next=4,c.then((function(e){t=e.data,b(null)})).catch((function(e){console.error(e),b(e)}));case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(l.a)(o.a.mark((function e(t,c){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(c);case 2:if(e.sent!==c){e.next=7;break}return localStorage.setItem("pokemonAuthorization",t),a(m),e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}();return Object(k.jsx)("div",{className:"app",children:Object(k.jsx)(u.a,{children:Object(k.jsxs)(d.d,{children:[Object(k.jsx)(d.b,{exact:!0,path:"/",render:function(){return c!==m?Object(k.jsx)(d.a,{to:"/login"}):Object(k.jsx)(d.a,{to:"/cards"})}}),Object(k.jsx)(d.b,{exact:!0,path:"/login",render:function(){return c!==m?Object(k.jsx)(C,{onLoginFormSubmit:O,onCodeFormSubmit:x,serverError:i}):Object(k.jsx)(d.a,{to:"/cards"})}}),Object(k.jsx)(d.b,{exact:!0,path:"/logout",render:function(){return localStorage.removeItem("pokemonAuthorization"),a(f),Object(k.jsx)(d.a,{to:"/"})}}),Object(k.jsx)(d.b,{exact:!0,path:"/cards",render:function(){return c!==m?Object(k.jsx)(d.a,{to:"/login"}):Object(k.jsx)(q,{})}}),Object(k.jsx)(d.b,{exact:!0,path:"/cards/:cardId",render:function(){return c!==m?Object(k.jsx)(d.a,{to:"/login"}):Object(k.jsx)(A,{})}})]})})})});s.a.render(Object(k.jsx)(a.a.StrictMode,{children:Object(k.jsx)(G,{})}),document.getElementById("root"))},61:function(e,t,c){},64:function(e,t,c){},92:function(e,t){},94:function(e,t,c){}},[[108,1,2]]]);
//# sourceMappingURL=main.becb90c0.chunk.js.map