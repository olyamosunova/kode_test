(this.webpackJsonpkode_test=this.webpackJsonpkode_test||[]).push([[0],{100:function(e,t,c){},101:function(e,t,c){},102:function(e,t,c){},103:function(e,t,c){},104:function(e,t,c){},105:function(e,t,c){},106:function(e,t,c){},107:function(e,t,c){},108:function(e,t,c){},109:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c(22),r=c.n(a),s=c(21),i=c.n(s),o=c(25),l=c(3),d=c(16),j=c(5),u=c(29),b=c(19),O="Required field.",m="Incorrect login or password.",f="Invalid code",h="LOGIN",p="CODE",x="1cf24b30-3606-41ab-9abd-fc96dbcd39bf",v=c(13),g=c.n(v),_=c(1),k=function(e){var t=e.isAuthorizationSuccess,c=e.submitForm,a=e.handlerChange,r=e.errors,s=Object(n.useState)(!1),i=Object(l.a)(s,2),o=i[0],d=i[1];Object(n.useEffect)((function(){(r.login||r.password||!t)&&d(!0)}),[r]);return Object(_.jsxs)("form",{className:g()("form",{"form--error":o}),onSubmit:function(e){d(!1),c(e)},children:[!t&&Object(_.jsx)("p",{className:"form__error",children:m}),Object(_.jsxs)("div",{className:"form__block",children:[Object(_.jsxs)("label",{className:r.login&&"is-invalid",children:[Object(_.jsx)("span",{children:"Login"}),Object(_.jsx)("input",{name:"login",type:"text",placeholder:"Enter login",onChange:a})]}),r.login&&Object(_.jsx)("div",{className:"form__block-error",children:r.login})]}),Object(_.jsxs)("div",{className:"form__block",children:[Object(_.jsxs)("label",{className:r.password&&"is-invalid",children:[Object(_.jsx)("span",{children:"Password"}),Object(_.jsx)("input",{name:"password",type:"password",placeholder:"Enter password",onChange:a})]}),r.password&&Object(_.jsx)("div",{className:"form__block-error",children:r.password})]}),Object(_.jsx)("button",{className:"button",type:"submit",children:"Log in"})]})},N=function(e){var t=e.handlerChange,c=e.submitForm,a=e.errors,r=Object(n.useState)(!1),s=Object(l.a)(r,2),i=s[0],o=s[1];Object(n.useEffect)((function(){a.code&&o(!0)}),[a]);return Object(_.jsxs)("form",{className:g()("form",{"form--error":i}),onSubmit:function(e){o(!1),c(e)},children:[Object(_.jsxs)("div",{className:"form__block",children:[Object(_.jsxs)("label",{className:a.code&&"is-invalid",children:[Object(_.jsx)("span",{children:"Code from SMS"}),Object(_.jsx)("input",{name:"code",type:"text",placeholder:"Enter code",onChange:t})]}),a.code&&Object(_.jsx)("div",{className:"form__block-error",children:a.code})]}),Object(_.jsx)("button",{className:"button",type:"submit",children:"Send"})]})},S=(c(63),function(e){var t=e.handlerLoginFormSubmit,c=e.handlerCodeFormSubmit,a=e.serverError,r=Object(n.useState)(!0),s=Object(l.a)(r,2),d=s[0],j=s[1],m=Object(n.useState)(!1),x=Object(l.a)(m,2),v=x[0],g=x[1],S=Object(n.useState)({fields:{},errors:{}}),y=Object(l.a)(S,2),C=y[0],w=y[1];Object(n.useEffect)((function(){a&&w(Object(b.a)(Object(b.a)({},C),{},{errors:{}}))}),[a]);var L=function(e){var t={},c=!0;switch(e){case h:C.fields.login||(c=!1,t.login=O),C.fields.password||(c=!1,t.password=O);break;case p:C.fields.code||(c=!1,t.code=O)}return w(Object(b.a)(Object(b.a)({},C),{},{errors:t})),c},E=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!L(p)){e.next=6;break}return e.next=4,c(C.fields.login,C.fields.code);case 4:e.sent||w(Object(b.a)(Object(b.a)({},C),{},{errors:{code:f}}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(e){var t=C.fields;t[e.target.name]=e.target.value,w({fields:t,errors:Object(b.a)(Object(b.a)({},C.errors),{},Object(u.a)({},e.target.name,null))})};return Object(_.jsx)("div",{className:"auth",children:Object(_.jsxs)("div",{className:"container",children:[a&&Object(_.jsxs)("p",{className:"server-errors",children:["Server Error: ",a]}),v?Object(_.jsx)(N,{handlerChange:F,submitForm:E,errors:C.errors}):Object(_.jsx)(k,{isAuthorizationSuccess:d,handlerChange:F,submitForm:function(e){e.preventDefault(),L(h)&&(t(C.fields)?(g(!0),alert("Valid SMS code: 123456")):j(!1))},errors:C.errors})]})})}),y=c(17),C=(c(93),function(e){var t=e.clickLogout,c=e.isBackLink,n=void 0!==c&&c,a=Object(j.g)();return Object(_.jsx)("header",{className:"header",children:Object(_.jsx)("div",{className:"container",children:Object(_.jsxs)("div",{className:"header__nav",children:[n&&Object(_.jsx)("button",{type:"button",onClick:function(){a.goBack()},children:"< Back"}),Object(_.jsx)("button",{className:"ml-auto",onClick:function(){localStorage.removeItem("pokemonAuthorization"),t(),a.push("/login")},children:"Logout"})]})})})}),w=c(126),L=(c(99),function(){return Object(_.jsx)("div",{className:"loader",children:Object(_.jsx)(w.a,{color:"primary"})})}),E=c.p+"static/media/cry.f7c602c9.gif",F=(c(100),function(e){var t=e.message,c=e.backUrl,n=e.handlerClickBack;return Object(_.jsxs)("div",{className:"error-block",children:[Object(_.jsx)("p",{children:t}),Object(_.jsx)("img",{src:E,alt:"sticker"}),Object(_.jsx)(d.b,{className:"button",to:c,onClick:n,children:"Go to back"})]})}),I=(c(101),function(e){var t,c,a,r,s,i=e.handlerClickLogout,o=Object(j.h)().cardId,d=Object(n.useState)({}),u=Object(l.a)(d,2),b=u[0],O=u[1],m=Object(n.useState)(!1),f=Object(l.a)(m,2),h=f[0],p=f[1],v=Object(n.useState)(!1),g=Object(l.a)(v,2),k=g[0],N=g[1];return y.a.configure({apiKey:x}),Object(n.useEffect)((function(){y.a.card.find(o).then((function(e){O(e)})).catch((function(){N(!0)})).finally((function(){p(!0)}))}),[o]),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(C,{clickLogout:i,isBackLink:!0}),h?Object(_.jsx)(_.Fragment,{children:k?Object(_.jsx)(F,{message:"Failed to load detail information.",backUrl:"/cards",handlerClickBack:function(){return N(!1)}}):Object(_.jsx)("main",{children:Object(_.jsx)("div",{className:"container",children:Object(_.jsxs)("div",{className:"card-detail",children:[Object(_.jsx)("p",{className:"card-detail__title",children:b.name}),Object(_.jsx)("div",{className:"card-detail__block",children:Object(_.jsx)("div",{className:"card-detail__image",children:Object(_.jsx)("img",{src:null===(t=b.images)||void 0===t?void 0:t.large,alt:b.name})})}),Object(_.jsxs)("div",{className:"card-detail__block",children:[Object(_.jsxs)("div",{className:"card-detail__info",children:[Object(_.jsxs)("p",{children:["Pokemon name: ",Object(_.jsx)("b",{children:b.name})]}),Object(_.jsxs)("p",{children:["Supertype: ",Object(_.jsx)("b",{children:b.supertype})]}),Object(_.jsxs)("p",{children:["Types: ",Object(_.jsx)("b",{children:null===(c=b.types)||void 0===c?void 0:c.join(", ")})]}),Object(_.jsxs)("p",{children:["Subtypes: ",Object(_.jsx)("b",{children:null===(a=b.subtypes)||void 0===a?void 0:a.join(", ")})]})]}),(null===(r=b.attacks)||void 0===r?void 0:r.length)&&Object(_.jsx)("div",{className:"card-detail__info",children:Object(_.jsx)("ul",{children:null===(s=b.attacks)||void 0===s?void 0:s.map((function(e){return Object(_.jsx)("li",{children:Object(_.jsx)("b",{children:e.name})},e.name)}))})}),Object(_.jsx)("p",{className:"card-detail__description",children:b.flavorText})]})]})})})}):Object(_.jsx)(L,{})]})}),z=c(128),B=(c(102),function(e){var t=e.title,c=void 0===t?"Type":t,a=e.items,r=void 0===a?[]:a,s=e.onSelect,i=e.activeItem,o=void 0===i?"":i,d=Object(n.useState)(!1),j=Object(l.a)(d,2),u=j[0],b=j[1],O=Object(n.useState)(o),m=Object(l.a)(O,2),f=m[0],h=m[1],p=Object(n.useState)(r),x=Object(l.a)(p,2),v=x[0],k=x[1],N=Object(n.useRef)(),S=Object(n.useRef)();Object(n.useEffect)((function(){document.addEventListener("click",(function(e){S.current&&!S.current.contains(e.target)&&b(!1)}))}),[]),Object(n.useEffect)((function(){k(r),N.current.value=""}),[u]);return Object(_.jsxs)("div",{ref:S,className:g()("select my-5",{"select--open":u}),children:[Object(_.jsx)("div",{className:"select__header",onClick:function(){b(!u)},children:Object(_.jsx)("span",{children:f||c})}),Object(_.jsxs)("div",{className:"select__body",children:[Object(_.jsx)("div",{className:"select__search",children:Object(_.jsx)("input",{ref:N,onInput:function(e){return function(e){var t=e.target.value.toLowerCase(),c=r.filter((function(e){return e.toLowerCase().indexOf(t)>-1}));k(""!==t?c:r)}(e)},placeholder:"Type something..."})}),Object(_.jsx)("div",{className:"select__list",children:v.map((function(e){return Object(_.jsx)("a",{className:g()("select__item",{"select__item--active":e===f}),onClick:function(){return h(f===(t=e)?"":t),b(!1),void s(f===t?"":t);var t},children:e},e)}))})]})]})}),M=(c(103),function(e){var t,c=e.className,n=e.card,a=e.handlerClickCard;return Object(_.jsxs)("div",{className:g()(c,{"card-item":!0}),tabIndex:"0",onClick:a,children:[Object(_.jsx)("div",{className:"card-item__image",children:Object(_.jsx)("img",{src:null===(t=n.images)||void 0===t?void 0:t.small,alt:n.name})}),Object(_.jsxs)("div",{className:"card-item__info",children:[Object(_.jsx)("p",{children:n.name}),Object(_.jsxs)("p",{children:[" ",n.artist]})]}),Object(_.jsx)("div",{className:"card-item__controls",children:Object(_.jsx)(d.b,{onClick:function(e){return e.stopPropagation()},to:"/cards/".concat(n.id),className:"card-item__button",children:"Go to detail page"})})]})}),P=(c(104),function(e){var t=e.card,c=e.handlerCloseModal,a=t.name,r=t.images,s=Object(n.useRef)(),i=Object(n.useState)(!1),o=Object(l.a)(i,2),d=o[0],j=o[1];return Object(n.useEffect)((function(){j(!0);document.addEventListener("click",(function(e){s.current&&!s.current.contains(e.target)&&(j(!1),c())}))}),[]),Object(_.jsx)("div",{className:"modal-card",children:Object(_.jsxs)("div",{className:g()("modal-card__wrapper",{"modal-card__wrapper--show":d}),ref:s,children:[Object(_.jsxs)("div",{className:"modal-card__header",children:[Object(_.jsx)("p",{className:"modal-card__title",children:a}),Object(_.jsx)("button",{className:"modal-card__close",type:"button",onClick:c,children:Object(_.jsx)("span",{children:"Close modal"})})]}),Object(_.jsx)("div",{className:"modal-card__body",children:Object(_.jsx)("img",{src:null===r||void 0===r?void 0:r.large,alt:a})})]})})}),T=function(e,t){return e&&t?"types:".concat(e," subtypes:").concat(t):e?"types:".concat(e):t&&"subtypes:".concat(t)},A=function(e,t,c){var n=e&&"type=".concat(e,"&"),a=t&&"subtype=".concat(t,"&"),r=c&&"page=".concat(c);return"?".concat(n).concat(a).concat(r)},R=(c(105),function(e){var t=e.handlerClickLogout,c=Object(j.g)(),a=new URLSearchParams(c.location.search),r=Object(n.useState)([]),s=Object(l.a)(r,2),i=s[0],o=s[1],d=Object(n.useState)([]),u=Object(l.a)(d,2),b=u[0],O=u[1],m=Object(n.useState)([]),f=Object(l.a)(m,2),h=f[0],p=f[1],v=Object(n.useState)(!1),k=Object(l.a)(v,2),N=k[0],S=k[1],w=Object(n.useState)((function(){var e;return null!==(e=a.get("type"))&&void 0!==e?e:""})),E=Object(l.a)(w,2),I=E[0],R=E[1],q=Object(n.useState)((function(){var e;return null!==(e=a.get("subtype"))&&void 0!==e?e:""})),D=Object(l.a)(q,2),G=D[0],U=D[1],J=Object(n.useState)(0),K=Object(l.a)(J,2),V=K[0],H=K[1],Q=Object(n.useState)((function(){return a.get("page")?+a.get("page"):1})),W=Object(l.a)(Q,2),X=W[0],Y=W[1],Z=Object(n.useState)(null),$=Object(l.a)(Z,2),ee=$[0],te=$[1],ce=Object(n.useState)(!1),ne=Object(l.a)(ce,2),ae=ne[0],re=ne[1];y.a.configure({apiKey:x}),Object(n.useEffect)((function(){var e=T(I,G);y.a.type.all().then((function(e){O(e)})).catch((function(){re(!0)})),y.a.subtype.all().then((function(e){p(e)})).catch((function(){re(!0)})),y.a.card.where({pageSize:4,page:1,q:e}).then((function(e){o(e.data),H(Math.round(e.totalCount/e.pageSize))})).catch((function(){re(!0)})).finally((function(){return S(!0)}))}),[]),Object(n.useEffect)((function(){var e=T(I,G);S(!1),y.a.card.where({pageSize:4,page:1,q:e}).then((function(e){o(e.data),H(Math.round(e.totalCount/e.pageSize)),Y(1)})).catch((function(){re(!0)})).finally((function(){return S(!0)})),c.push("/cards".concat(A(I,G,X)))}),[I,G]),Object(n.useEffect)((function(){var e=T(I,G);S(!1),y.a.card.where({pageSize:4,page:X,q:e}).then((function(e){o(e.data),H(Math.round(e.totalCount/e.pageSize))})).catch((function(){re(!0)})).finally((function(){return S(!0)})),c.push("/cards".concat(A(I,G,X)))}),[X]);return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(C,{clickLogout:t}),Object(_.jsxs)("main",{className:g()({hidden:ee}),children:[Object(_.jsx)("div",{className:"container",children:Object(_.jsx)(_.Fragment,{children:ae?Object(_.jsx)(F,{message:"Failed to load cards.",backUrl:"/cards",handlerClickBack:function(){return re(!1)}}):Object(_.jsxs)("div",{className:"cards",children:[Object(_.jsxs)("div",{className:"cards__filter",children:[Object(_.jsx)(B,{title:"Type",items:b,onSelect:function(e){return R(e)},activeItem:I}),Object(_.jsx)(B,{title:"Subtype",items:h,onSelect:function(e){return U(e)},activeItem:G})]}),Object(_.jsx)("div",{className:"cards__wrapper",children:N?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("div",{className:"cards__list",children:[i.map((function(e){return Object(_.jsx)(M,{className:"cards__item",card:e,handlerClickCard:function(){return te(e)}},e.id)})),!i.length&&Object(_.jsx)("p",{children:"Pokemons not found by this filter"})]}),V>1&&Object(_.jsx)(z.a,{page:X,onChange:function(e,t){e.preventDefault(),Y(t)},count:V,showFirstButton:!0,showLastButton:!0})]}):Object(_.jsx)(L,{})})]})})}),ee&&Object(_.jsx)(P,{card:ee,handlerCloseModal:function(){return te(null)}})]})]})}),q=c.p+"static/media/pokeball.e45a6ab4.png",D=(c(106),function(){return Object(_.jsxs)("div",{className:"empty-page",children:[Object(_.jsxs)("div",{className:"empty-page__status",children:["4",Object(_.jsx)("img",{src:q,alt:"pokeball 0"}),"4"]}),Object(_.jsx)("p",{className:"empty-page__text",children:"Page Not Found!"}),Object(_.jsx)(d.b,{className:"empty-page__back button",to:"/",children:"Go to back"})]})}),G=(c(107),function(){var e=localStorage.getItem("pokemonAuthorization"),t=Object(n.useState)(e),c=Object(l.a)(t,2),a=c[0],r=c[1],s=Object(n.useState)(null),u=Object(l.a)(s,2),b=u[0],O=u[1],m=function(){var e=Object(o.a)(i.a.mark((function e(){var t,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,c=new Promise((function(e,t){setTimeout((function(){e({data:"123456"})}),250)})),e.next=4,c.then((function(e){t=e.data,O(null)})).catch((function(e){console.error(e),O(e)}));case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(e){var t=e.login,c=e.password;return"kode@kode.ru"===t.toLowerCase()&&"Enk0deng"===c},h=function(){var e=Object(o.a)(i.a.mark((function e(t,c){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(c);case 2:if(e.sent!==c){e.next=7;break}return localStorage.setItem("pokemonAuthorization",t),r(t),e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}();return Object(_.jsx)("div",{className:"app",children:Object(_.jsx)(d.a,{children:Object(_.jsxs)(j.d,{children:[Object(_.jsx)(j.b,{exact:!0,path:"/",render:function(){return a?Object(_.jsx)(j.a,{to:"/cards"}):Object(_.jsx)(j.a,{to:"/login"})}}),Object(_.jsx)(j.b,{exact:!0,path:"/login",render:function(){return a?Object(_.jsx)(j.a,{to:"/cards"}):Object(_.jsx)(S,{handlerLoginFormSubmit:f,handlerCodeFormSubmit:h,serverError:b})}}),Object(_.jsx)(j.b,{exact:!0,path:"/cards",render:function(){return a?Object(_.jsx)(R,{handlerClickLogout:function(){return r(null)}}):Object(_.jsx)(j.a,{to:"/login"})}}),Object(_.jsx)(j.b,{exact:!0,path:"/cards/:cardId",render:function(){return a?Object(_.jsx)(I,{handlerClickLogout:function(){return r(null)}}):Object(_.jsx)(j.a,{to:"/login"})}}),Object(_.jsx)(j.b,{children:Object(_.jsx)(D,{})})]})})})});c(108);r.a.render(Object(_.jsx)(G,{}),document.getElementById("root"))},63:function(e,t,c){},91:function(e,t){},93:function(e,t,c){},99:function(e,t,c){}},[[109,1,2]]]);
//# sourceMappingURL=main.0f4fd56d.chunk.js.map