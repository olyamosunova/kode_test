(this.webpackJsonpkode_test=this.webpackJsonpkode_test||[]).push([[0],{105:function(e,t){},107:function(e,t,c){},108:function(e,t,c){},109:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),s=c(22),r=c.n(s),i=(c(61),c(20)),o=c.n(i),l=c(25),j=c(4),d=c(5),u=c(17),b=(c(63),c(29)),O=c(18),m="NO_AUTH",h="AUTH",f="\u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e.",x="\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c.",p="\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043a\u043e\u0434",v="LOGIN",g="CODE",_="1cf24b30-3606-41ab-9abd-fc96dbcd39bf",N=c(1),S=function(e){var t=e.isAuthorizationSuccess,c=e.submitForm,n=e.handleChange,a=e.errors;return Object(N.jsxs)("form",{className:"form",onSubmit:c,children:[!t&&Object(N.jsx)("p",{className:"form__error",children:x}),Object(N.jsxs)("div",{className:"form__block",children:[Object(N.jsxs)("label",{className:a.login&&"is-invalid",children:[Object(N.jsx)("span",{children:"Login"}),Object(N.jsx)("input",{name:"login",type:"text",placeholder:"Enter login",onChange:n})]}),a.login&&Object(N.jsx)("div",{className:"form__block-error",children:a.login})]}),Object(N.jsxs)("div",{className:"form__block",children:[Object(N.jsxs)("label",{className:a.password&&"is-invalid",children:[Object(N.jsx)("span",{children:"Login"}),Object(N.jsx)("input",{name:"password",type:"password",placeholder:"Enter password",onChange:n})]}),a.password&&Object(N.jsx)("div",{className:"form__block-error",children:a.password})]}),Object(N.jsx)("button",{className:"button",type:"submit",children:"Log in"})]})},k=(c(65),function(e){var t=e.handleChange,c=e.submitForm,n=e.errors;return Object(N.jsxs)("form",{className:"form",onSubmit:c,children:[Object(N.jsxs)("div",{className:"form__block",children:[Object(N.jsxs)("label",{className:n.code&&"is-invalid",children:[Object(N.jsx)("span",{children:"Code from SMS"}),Object(N.jsx)("input",{name:"code",type:"text",placeholder:"Enter code",onChange:t})]}),n.code&&Object(N.jsx)("div",{className:"form__block-error",children:n.code})]}),Object(N.jsx)("button",{className:"button",type:"submit",children:"Send"})]})}),y=function(e){var t=e.onLoginFormSubmit,c=e.onCodeFormSubmit,a=e.serverError,s=Object(n.useState)(!0),r=Object(j.a)(s,2),i=r[0],d=r[1],u=Object(n.useState)(!1),m=Object(j.a)(u,2),h=m[0],x=m[1],_=Object(n.useState)({fields:{},errors:{}}),y=Object(j.a)(_,2),w=y[0],C=y[1];Object(n.useEffect)((function(){a&&C((function(e){return Object(O.a)(Object(O.a)({},e),{},{errors:{}})}))}),[a]);var E=function(e){var t={},c=!0;switch(e){case v:w.fields.login||(c=!1,t.login=f),w.fields.password||(c=!1,t.password=f);break;case g:w.fields.code||(c=!1,t.code=f)}return C(Object(O.a)(Object(O.a)({},w),{},{errors:t})),c},F=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!E(g)){e.next=6;break}return e.next=4,c(w.fields.login,w.fields.code);case 4:e.sent||C(Object(O.a)(Object(O.a)({},w),{},{errors:{code:p}}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(e){var t=w.fields;t[e.target.name]=e.target.value,C({fields:t,errors:Object(O.a)(Object(O.a)({},w.errors),{},Object(b.a)({},e.target.name,null))})};return Object(N.jsx)("div",{className:"auth",children:Object(N.jsxs)("div",{className:"container",children:[a&&Object(N.jsxs)("p",{className:"text-danger",children:["\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430: ",a]}),h?Object(N.jsx)(k,{handleChange:L,submitForm:F,errors:w.errors}):Object(N.jsx)(S,{isAuthorizationSuccess:i,handleChange:L,submitForm:function(e){e.preventDefault(),E(v)&&(t(w.fields)?(x(!0),alert("Valid SMS code: 123456")):d(!1))},errors:w.errors})]})})},w=(c(66),c(126)),C=(c(67),function(){return Object(N.jsx)("div",{className:"loader",children:Object(N.jsx)(w.a,{color:"primary"})})}),E=(c(71),c(21)),F=c.n(E),L=function(e){var t=e.title,c=void 0===t?"Type":t,a=e.items,s=void 0===a?[]:a,r=e.onSelect,i=e.activeItem,o=void 0===i?"":i,l=Object(n.useState)(!1),d=Object(j.a)(l,2),u=d[0],b=d[1],O=Object(n.useState)(o),m=Object(j.a)(O,2),h=m[0],f=m[1],x=Object(n.useState)(s),p=Object(j.a)(x,2),v=p[0],g=p[1],_=Object(n.useRef)(),S=Object(n.useRef)();Object(n.useEffect)((function(){document.addEventListener("click",(function(e){S.current&&!S.current.contains(e.target)&&b(!1)}))}),[]),Object(n.useEffect)((function(){g(s),_.current.value=""}),[u]);return Object(N.jsxs)("div",{ref:S,className:F()("select my-5",{"select--open":u}),children:[Object(N.jsx)("div",{className:"select__header",onClick:function(){b(!u)},children:Object(N.jsx)("span",{children:h||c})}),Object(N.jsxs)("div",{className:"select__body",children:[Object(N.jsx)("div",{className:"select__search",children:Object(N.jsx)("input",{ref:_,onInput:function(e){return function(e){var t=e.target.value.toLowerCase(),c=s.filter((function(e){return e.toLowerCase().indexOf(t)>-1}));g(""!==t?c:s)}(e)},placeholder:"Type something..."})}),Object(N.jsx)("div",{className:"select__list",children:v.map((function(e){return Object(N.jsx)("a",{className:F()("select__item",{"select__item--active":e===h}),onClick:function(){return f(h===(t=e)?"":t),b(!1),void r(h===t?"":t);var t},children:e},e)}))})]})]})},I=(c(72),c(128)),z=(c(73),function(e){var t,c=e.className,n=e.card,a=e.handlerClickCard;return Object(N.jsxs)("div",{className:F()(c,{"card-item":!0}),tabIndex:0,onClick:a,children:[Object(N.jsx)("div",{className:"card-item__image",children:Object(N.jsx)("img",{src:null===(t=n.images)||void 0===t?void 0:t.small,alt:n.name})}),Object(N.jsxs)("div",{className:"card-item__info",children:[Object(N.jsx)("p",{children:n.name}),Object(N.jsxs)("p",{children:[" ",n.artist]})]}),Object(N.jsx)("div",{className:"card-item__controls",children:Object(N.jsx)(u.b,{onClick:function(e){e.stopPropagation()},to:"/cards/".concat(n.id),className:"card-item__button",children:"Go to detail page"})})]})}),T=(c(76),function(e){var t=e.card,c=e.handlerCloseModal,a=t.name,s=t.images,r=Object(n.useRef)(),i=Object(n.useState)(!1),o=Object(j.a)(i,2),l=o[0],d=o[1];return Object(n.useEffect)((function(){d(!0);document.addEventListener("click",(function(e){r.current&&!r.current.contains(e.target)&&(d(!1),c())}))}),[]),Object(N.jsx)("div",{className:"modal-card",children:Object(N.jsxs)("div",{className:F()("modal-card__wrapper",{"modal-card__wrapper--show":l}),ref:r,children:[Object(N.jsxs)("div",{className:"modal-card__header",children:[Object(N.jsx)("p",{className:"modal-card__title",children:a}),Object(N.jsx)("button",{className:"modal-card__close",type:"button",onClick:c,children:Object(N.jsx)("span",{children:"Close modal"})})]}),Object(N.jsx)("div",{className:"modal-card__body",children:Object(N.jsx)("img",{src:s.large,alt:a})})]})})}),A=function(e,t){return e&&t?"types:".concat(e," subtypes:").concat(t):e?"types:".concat(e):t&&"subtypes:".concat(t)},B=function(e,t,c){var n=e&&"type=".concat(e,"&"),a=t&&"subtype=".concat(t,"&"),s=c&&"page=".concat(c);return"?".concat(n).concat(a).concat(s)},M=(c(77),c.p+"static/media/cry.f7c602c9.gif"),P=function(e){var t=e.message;return Object(N.jsxs)("div",{className:"error-block",children:[Object(N.jsx)("p",{children:t}),Object(N.jsx)("img",{src:M,alt:"sticker"})]})},D=c(15),R=function(){var e,t,c,a=Object(d.g)(),s=new URLSearchParams(a.location.search);D.a.configure({apiKey:_});var r=Object(n.useState)([]),i=Object(j.a)(r,2),o=i[0],l=i[1],u=Object(n.useState)([]),b=Object(j.a)(u,2),O=b[0],m=b[1],h=Object(n.useState)([]),f=Object(j.a)(h,2),x=f[0],p=f[1],v=Object(n.useState)(!1),g=Object(j.a)(v,2),S=g[0],k=g[1],y=Object(n.useState)(null!==(e=s.get("type"))&&void 0!==e?e:""),w=Object(j.a)(y,2),E=w[0],F=w[1],M=Object(n.useState)(null!==(t=s.get("subtype"))&&void 0!==t?t:""),R=Object(j.a)(M,2),U=R[0],q=R[1],G=Object(n.useState)(o),H=Object(j.a)(G,2),J=H[0],K=H[1],V=Object(n.useState)(0),Q=Object(j.a)(V,2),W=Q[0],X=Q[1],Y=Object(n.useState)(null!==(c=+s.get("page"))&&void 0!==c?c:1),Z=Object(j.a)(Y,2),$=Z[0],ee=Z[1],te=Object(n.useState)(null),ce=Object(j.a)(te,2),ne=ce[0],ae=ce[1],se=Object(n.useState)(!1),re=Object(j.a)(se,2),ie=re[0],oe=re[1];Object(n.useEffect)((function(){D.a.type.all().then((function(e){m(e)})).catch((function(){oe(!0)})),D.a.subtype.all().then((function(e){p(e)})).catch((function(){oe(!0)})),D.a.card.where({pageSize:4,page:1}).then((function(e){console.log(e),l(e.data),K(e.data),X(Math.round(e.totalCount/e.pageSize))})).catch((function(){oe(!0)})).finally((function(){return k(!0)}))}),[]),Object(n.useEffect)((function(){var e=A(E,U);D.a.card.where({pageSize:4,page:1,q:e}).then((function(e){K(e.data),X(Math.round(e.totalCount/e.pageSize)),ee(1)})).catch((function(){oe(!0)})),a.push("/cards".concat(B(E,U,$)))}),[E,U]),Object(n.useEffect)((function(){var e=A(E,U);D.a.card.where({pageSize:4,page:$,q:e}).then((function(e){l(e.data),K(e.data)})).catch((function(){oe(!0)})),a.push("/cards".concat(B(E,U,$)))}),[$]);return Object(N.jsxs)(N.Fragment,{children:[S?Object(N.jsx)(N.Fragment,{children:ie?Object(N.jsx)(P,{message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443."}):Object(N.jsxs)("div",{className:"cards",children:[Object(N.jsxs)("div",{className:"cards__filter",children:[O.length&&Object(N.jsx)(L,{title:"Type",items:O,onSelect:function(e){F(e)},activeItem:E}),x.length&&Object(N.jsx)(L,{title:"Subtype",items:x,onSelect:function(e){q(e)},activeItem:U})]}),Object(N.jsxs)("div",{className:"cards__wrapper",children:[Object(N.jsxs)("div",{className:"cards__list",children:[J.map((function(e){return Object(N.jsx)(z,{className:"cards__item",card:e,handlerClickCard:function(){return ae(e)}},e.id)})),!J.length&&Object(N.jsx)("p",{children:"Pokemons not found by this filter"})]}),W>1&&Object(N.jsx)(I.a,{page:$,onChange:function(e,t){e.preventDefault(),ee(t)},count:W,showFirstButton:!0,showLastButton:!0})]})]})}):Object(N.jsx)(C,{}),ne&&Object(N.jsx)(T,{card:ne,handlerCloseModal:function(){return ae(null)}})]})},U=(c(107),function(e){var t=e.isBackLink,c=void 0!==t&&t,n=Object(d.g)();return Object(N.jsx)("header",{className:"header",children:Object(N.jsx)("div",{className:"container",children:Object(N.jsxs)("div",{className:"header__nav",children:[c&&Object(N.jsx)("button",{type:"button",onClick:function(){n.goBack()},children:"< Back"}),Object(N.jsx)(u.b,{className:"ml-auto",to:"/logout",children:"Logout"})]})})})}),q=function(){return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(U,{}),Object(N.jsx)("main",{children:Object(N.jsx)("div",{className:"container",children:Object(N.jsx)(R,{})})})]})},G=(c(108),function(){var e,t,c,a,s,r=Object(d.h)().cardId,i=Object(n.useState)({}),o=Object(j.a)(i,2),l=o[0],u=o[1],b=Object(n.useState)(!1),O=Object(j.a)(b,2),m=O[0],h=O[1],f=Object(n.useState)(!1),x=Object(j.a)(f,2),p=x[0],v=x[1];return D.a.configure({apiKey:_}),Object(n.useEffect)((function(){D.a.card.find(r).then((function(e){console.log(e),u(e)})).catch((function(){v(!0)})).finally((function(){h(!0)}))}),[r]),Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(U,{isBackLink:!0}),Object(N.jsx)(N.Fragment,{children:m?Object(N.jsx)(N.Fragment,{children:p?Object(N.jsx)(P,{message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0434\u0435\u0442\u0430\u043b\u044c\u043d\u0443\u044e \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443."}):Object(N.jsx)("main",{children:Object(N.jsx)("div",{className:"container",children:Object(N.jsxs)("div",{className:"card-detail",children:[Object(N.jsx)("p",{className:"card-detail__title",children:l.name}),Object(N.jsx)("div",{className:"card-detail__block",children:Object(N.jsx)("div",{className:"card-detail__image",children:Object(N.jsx)("img",{src:null===(e=l.images)||void 0===e?void 0:e.large,alt:l.name})})}),Object(N.jsxs)("div",{className:"card-detail__block",children:[Object(N.jsxs)("div",{className:"card-detail__info",children:[Object(N.jsxs)("p",{children:["Pokemon name: ",Object(N.jsx)("b",{children:l.name})]}),Object(N.jsxs)("p",{children:["Supertype: ",Object(N.jsx)("b",{children:l.supertype})]}),Object(N.jsxs)("p",{children:["Types: ",Object(N.jsx)("b",{children:null===(t=l.types)||void 0===t?void 0:t.join(", ")})]}),Object(N.jsxs)("p",{children:["Subtypes: ",Object(N.jsx)("b",{children:null===(c=l.subtypes)||void 0===c?void 0:c.join(", ")})]})]}),(null===(a=l.attacks)||void 0===a?void 0:a.length)&&Object(N.jsx)("div",{className:"card-detail__info",children:Object(N.jsx)("ul",{children:null===(s=l.attacks)||void 0===s?void 0:s.map((function(e){return Object(N.jsx)("li",{children:Object(N.jsx)("b",{children:e.name})},e.name)}))})}),Object(N.jsx)("p",{className:"card-detail__description",children:l.flavorText})]})]})})})}):Object(N.jsx)(C,{})})]})}),H=function(){var e=Object(n.useState)(localStorage.getItem("pokemonAuthorization")?h:m),t=Object(j.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)(null),r=Object(j.a)(s,2),i=r[0],b=r[1],O=function(e){var t=e.login,c=e.password;return"kode@kode.ru"===t&&"Enk0deng"===c},f=function(){var e=Object(l.a)(o.a.mark((function e(){var t,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,c=new Promise((function(e,t){setTimeout((function(){e({data:"123456"})}),250)})),e.next=4,c.then((function(e){t=e.data,b(null)})).catch((function(e){console.error(e),b(e)}));case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(l.a)(o.a.mark((function e(t,c){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(c);case 2:if(e.sent!==c){e.next=7;break}return localStorage.setItem("pokemonAuthorization",t),a(h),e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),p=function(){return Object(N.jsx)(y,{onLoginFormSubmit:O,onCodeFormSubmit:x,serverError:i})};return Object(N.jsx)("div",{className:"app",children:Object(N.jsx)(u.a,{children:Object(N.jsxs)(d.d,{children:[Object(N.jsx)(d.b,{exact:!0,path:"/",render:function(){return c!==h?Object(N.jsx)(d.a,{to:"/login"}):Object(N.jsx)(d.a,{to:"/cards"})}}),Object(N.jsx)(d.b,{exact:!0,path:"/login",render:function(){return c!==h?Object(N.jsx)(p,{}):Object(N.jsx)(d.a,{to:"/cards"})}}),Object(N.jsx)(d.b,{exact:!0,path:"/logout",render:function(){return localStorage.removeItem("pokemonAuthorization"),a(m),Object(N.jsx)(d.a,{to:"/"})}}),Object(N.jsx)(d.b,{exact:!0,path:"/cards",render:function(){return c!==h?Object(N.jsx)(d.a,{to:"/login"}):Object(N.jsx)(q,{})}}),Object(N.jsx)(d.b,{exact:!0,path:"/cards/:cardId",render:function(){return c!==h?Object(N.jsx)(d.a,{to:"/login"}):Object(N.jsx)(G,{})}})]})})})};r.a.render(Object(N.jsx)(a.a.StrictMode,{children:Object(N.jsx)(H,{})}),document.getElementById("root"))},61:function(e,t,c){},63:function(e,t,c){},65:function(e,t,c){},66:function(e,t,c){},67:function(e,t,c){},71:function(e,t,c){},72:function(e,t,c){},73:function(e,t,c){},76:function(e,t,c){},77:function(e,t,c){}},[[109,1,2]]]);
//# sourceMappingURL=main.11d3e55e.chunk.js.map